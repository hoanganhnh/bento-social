generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Post {
  id           String    @id @map("id") @db.VarChar(36)
  content      String    @map("content") @db.Text
  image        String?   @map("image") @db.VarChar(255)
  authorId     String    @map("author_id") @db.VarChar(36)
  topicId      String    @map("topic_id") @db.VarChar(36)
  isFeatured   Boolean?  @default(false) @map("is_featured")
  commentCount Int?      @default(0) @map("comment_count") @db.Integer
  likedCount   Int?      @default(0) @map("liked_count") @db.Integer
  type         PostType? @default(text) @map("type")
  createdAt    DateTime  @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt    DateTime  @default(now()) @map("updated_at") @db.Timestamp(0)

  @@index([authorId], map: "authorIdIdx")
  @@index([isFeatured], map: "isFeaturedIdx")
  @@map("posts")
}

model Topic {
  id        String   @id @map("id") @db.VarChar(36)
  name      String   @map("name") @db.VarChar(100)
  color     String   @map("color") @db.VarChar(10)
  postCount Int?     @default(0) @map("post_count") @db.Integer
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(0)
  updatedAt DateTime @default(now()) @map("updated_at") @db.Timestamp(0)

  @@map("topics")
}

enum PostType {
  text
  media
}
